Ñ
CD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\Utils.cs
	namespace		 	
BLL		
 
{

 
public 

class 
Utils 
{ 
public 
bool 
EnviarCorreo  
(  !
string! '
email( -
,- .
string/ 5
asunto6 <
,< =
string> D
mensajeE L
)L M
{ 	
var 
fromAddress 
= 
new !
MailAddress" -
(- .
$str. B
,B C
$strD Q
)Q R
;R S
var 
	toAddress 
= 
new 
MailAddress  +
(+ ,
email, 1
,1 2
$str3 <
)< =
;= >
const 
string 
fromPassword %
=& '
$str( =
;= >
try 
{ 
var 
smtp 
= 
new 

SmtpClient )
{ 
Host 
= 
$str +
,+ ,
Port 
= 
$num 
, 
	EnableSsl 
= 
true  $
,$ %
DeliveryMethod "
=# $
SmtpDeliveryMethod% 7
.7 8
Network8 ?
,? @!
UseDefaultCredentials )
=* +
false, 1
,1 2
Credentials 
=  !
new" %
NetworkCredential& 7
(7 8
fromAddress8 C
.C D
AddressD K
,K L
fromPasswordM Y
)Y Z
} 
; 
using 
( 
var 
mailMessage &
=' (
new) ,
MailMessage- 8
(8 9
fromAddress9 D
,D E
	toAddressF O
)O P
{   
Subject!! 
=!! 
asunto!! $
,!!$ %
Body"" 
="" 
mensaje"" "
}## 
)## 
{$$ 
smtp%% 
.%% 
Send%% 
(%% 
mailMessage%% )
)%%) *
;%%* +
}&& 
return(( 
true(( 
;(( 
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
Console,, 
.,, 
	WriteLine,, !
(,,! "
$",," $
$str,,$ ?
{,,? @
ex,,@ B
.,,B C
Message,,C J
},,J K
",,K L
),,L M
;,,M N
return-- 
false-- 
;-- 
}.. 
}// 	
}11 
}22 ˙
KD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\RegistroLogic.cs
	namespace		 	
BLL		
 
{

 
public 

class 
RegistroLogic 
{ 
public 
string $
GenerateVerificationCode .
(. /
int/ 2
length3 9
=: ;
$num< =
)= >
{ 	
const 
string 
chars 
=  
$str! -
;- .
var 
random 
= 
new 
Random #
(# $
)$ %
;% &
return 
new 
string 
( 

Enumerable (
.( )
Repeat) /
(/ 0
chars0 5
,5 6
length7 =
)= >
. 
Select 
( 
s 
=> 
s 
[ 
random %
.% &
Next& *
(* +
s+ ,
., -
Length- 3
)3 4
]4 5
)5 6
.6 7
ToArray7 >
(> ?
)? @
)@ A
;A B
} 	
public 
bool $
EnviarCodigoVerificacion ,
(, -
string- 3
email4 9
,9 :
string; A
codigoB H
)H I
{ 	
try 
{ 
var 
fromAddress 
=  !
new" %
MailAddress& 1
(1 2
$str2 F
,F G
$strH U
)U V
;V W
var 
	toAddress 
= 
new  #
MailAddress$ /
(/ 0
email0 5
,5 6
$str7 @
)@ A
;A B
const 
string 
fromPassword )
=* +
$str, A
;A B
const 
string 
subject $
=% &
$str' ?
;? @
string 
body 
= 
$"  
$str  >
{> ?
codigo? E
}E F
"F G
;G H
var!! 
smtp!! 
=!! 
new!! 

SmtpClient!! )
{"" 
Host## 
=## 
$str## +
,##+ ,
Port$$ 
=$$ 
$num$$ 
,$$ 
	EnableSsl%% 
=%% 
true%%  $
,%%$ %
DeliveryMethod&& "
=&&# $
SmtpDeliveryMethod&&% 7
.&&7 8
Network&&8 ?
,&&? @!
UseDefaultCredentials'' )
=''* +
false'', 1
,''1 2
Credentials(( 
=((  !
new((" %
NetworkCredential((& 7
(((7 8
fromAddress((8 C
.((C D
Address((D K
,((K L
fromPassword((M Y
)((Y Z
})) 
;)) 
using++ 
(++ 
var++ 
message++ "
=++# $
new++% (
MailMessage++) 4
(++4 5
fromAddress++5 @
,++@ A
	toAddress++B K
)++K L
{,, 
Subject-- 
=-- 
subject-- %
,--% &
Body.. 
=.. 
body.. 
}// 
)// 
{00 
smtp11 
.11 
Send11 
(11 
message11 %
)11% &
;11& '
}22 
return44 
true44 
;44 
}55 
catch66 
(66 
	Exception66 
ex66 
)66  
{77 
Console88 
.88 
	WriteLine88 !
(88! "
$"88" $
$str88$ ?
{88? @
ex88@ B
.88B C
Message88C J
}88J K
"88K L
)88L M
;88M N
return99 
false99 
;99 
}:: 
};; 	
}== 
}>> ·™
GD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\UserLogic.cs
	namespace 	
BLL
 
{ 
public		 

class		 
	UserLogic		 
{

 
public 
Users 
Create 
( 
Users !
user" &
)& '
{ 	
Users 
res 
= 
null 
; 
using 
( 
var 
r 
= 
RepositoryFactory ,
., -
CreateRepository- =
(= >
)> ?
)? @
{ 
Users 
existingUser "
=# $
r% &
.& '
Retrieve' /
</ 0
Users0 5
>5 6
(6 7
u7 8
=>9 ;
u< =
.= >
Username> F
==G I
userJ N
.N O
UsernameO W
||X Z
u[ \
.\ ]
EmailAddress] i
==j l
userm q
.q r
EmailAddressr ~
)~ 
;	 Ä
if 
( 
existingUser  
==! #
null$ (
)( )
{ 
res 
= 
r 
. 
Create "
(" #
user# '
)' (
;( )
} 
else 
{ 
throw 
new 
	Exception '
(' (
$str( s
)s t
;t u
} 
} 
return 
res 
; 
} 	
public   
UserDTO   
	CreateDTO    
(    !
UserDTO  ! (
userDTO  ) 0
)  0 1
{!! 	
UserDTO"" 
res"" 
="" 
null"" 
;"" 
using## 
(## 
var## 
r## 
=## 
RepositoryFactory## ,
.##, -
CreateRepository##- =
(##= >
)##> ?
)##? @
{$$ 
var&& 

userEntity&& 
=&&  
new&&! $
Users&&% *
{'' 
Username(( 
=(( 
userDTO(( &
.((& '
Username((' /
,((/ 0
EmailAddress))  
=))! "
userDTO))# *
.))* +
EmailAddress))+ 7
,))7 8
	FirstName** 
=** 
userDTO**  '
.**' (
	FirstName**( 1
,**1 2
LastName++ 
=++ 
userDTO++ &
.++& '
LastName++' /
,++/ 0
Rol,, 
=,, 
userDTO,, !
.,,! "
Rol,," %
}-- 
;-- 
Users00 
existingUser00 "
=00# $
r00% &
.00& '
Retrieve00' /
<00/ 0
Users000 5
>005 6
(006 7
u007 8
=>009 ;
u00< =
.00= >
Username00> F
==00G I

userEntity00J T
.00T U
Username00U ]
||00^ `
u00a b
.00b c
EmailAddress00c o
==00p r

userEntity00s }
.00} ~
EmailAddress	00~ ä
)
00ä ã
;
00ã å
if11 
(11 
existingUser11  
==11! #
null11$ (
)11( )
{22 
Users33 
createdUser33 %
=33& '
r33( )
.33) *
Create33* 0
(330 1

userEntity331 ;
)33; <
;33< =
res66 
=66 
new66 
UserDTO66 %
{77 
UserId88 
=88  
createdUser88! ,
.88, -
UserId88- 3
,883 4
Username99  
=99! "
createdUser99# .
.99. /
Username99/ 7
,997 8
EmailAddress:: $
=::% &
createdUser::' 2
.::2 3
EmailAddress::3 ?
,::? @
	FirstName;; !
=;;" #
createdUser;;$ /
.;;/ 0
	FirstName;;0 9
,;;9 :
LastName<<  
=<<! "
createdUser<<# .
.<<. /
LastName<</ 7
,<<7 8
Rol== 
=== 
createdUser== )
.==) *
Rol==* -
}>> 
;>> 
}?? 
else@@ 
{AA 
throwBB 
newBB 
	ExceptionBB '
(BB' (
$strBB( s
)BBs t
;BBt u
}CC 
}DD 
returnEE 
resEE 
;EE 
}FF 	
publicII 
UsersII 
RetrieveByIdII !
(II! "
intII" %
idII& (
)II( )
{JJ 	
UsersKK 
resKK 
=KK 
nullKK 
;KK 
usingLL 
(LL 
varLL 
rLL 
=LL 
RepositoryFactoryLL ,
.LL, -
CreateRepositoryLL- =
(LL= >
)LL> ?
)LL? @
{MM 
resNN 
=NN 
rNN 
.NN 
RetrieveNN  
<NN  !
UsersNN! &
>NN& '
(NN' (
uNN( )
=>NN* ,
uNN- .
.NN. /
UserIdNN/ 5
==NN6 8
idNN9 ;
)NN; <
;NN< =
}OO 
returnPP 
resPP 
;PP 
}QQ 	
publicTT 
UserDTOTT 
GetUserByIdTT "
(TT" #
intTT# &
idTT' )
)TT) *
{UU 	
UserDTOVV 
resVV 
=VV 
nullVV 
;VV 
usingWW 
(WW 
varWW 
rWW 
=WW 
RepositoryFactoryWW ,
.WW, -
CreateRepositoryWW- =
(WW= >
)WW> ?
)WW? @
{XX 
varYY 
userYY 
=YY 
rYY 
.YY 
RetrieveYY %
<YY% &
UsersYY& +
>YY+ ,
(YY, -
uYY- .
=>YY/ 1
uYY2 3
.YY3 4
UserIdYY4 :
==YY; =
idYY> @
)YY@ A
;YYA B
ifZZ 
(ZZ 
userZZ 
!=ZZ 
nullZZ  
)ZZ  !
{[[ 
res\\ 
=\\ 
new\\ 
UserDTO\\ %
{]] 
UserId^^ 
=^^  
user^^! %
.^^% &
UserId^^& ,
,^^, -
Username__  
=__! "
user__# '
.__' (
Username__( 0
,__0 1
EmailAddress`` $
=``% &
user``' +
.``+ ,
EmailAddress``, 8
,``8 9
	FirstNameaa !
=aa" #
useraa$ (
.aa( )
	FirstNameaa) 2
,aa2 3
LastNamebb  
=bb! "
userbb# '
.bb' (
LastNamebb( 0
,bb0 1
Rolcc 
=cc 
usercc "
.cc" #
Rolcc# &
}dd 
;dd 
}ee 
}ff 
returngg 
resgg 
;gg 
}hh 	
publickk 
boolkk 
Updatekk 
(kk 
Userskk  
userToUpdatekk! -
)kk- .
{ll 	
boolmm 
resmm 
=mm 
falsemm 
;mm 
usingnn 
(nn 
varnn 
rnn 
=nn 
RepositoryFactorynn ,
.nn, -
CreateRepositorynn- =
(nn= >
)nn> ?
)nn? @
{oo 
Userspp 
existingUserpp "
=pp# $
rpp% &
.pp& '
Retrievepp' /
<pp/ 0
Userspp0 5
>pp5 6
(pp6 7
upp7 8
=>pp9 ;
upp< =
.pp= >
Usernamepp> F
==ppG I
userToUpdateppJ V
.ppV W
UsernameppW _
&&pp` b
uppc d
.ppd e
UserIdppe k
!=ppl n
userToUpdateppo {
.pp{ |
UserId	pp| Ç
)
ppÇ É
;
ppÉ Ñ
ifqq 
(qq 
existingUserqq  
==qq! #
nullqq$ (
)qq( )
{rr 
resss 
=ss 
rss 
.ss 
Updatess "
(ss" #
userToUpdatess# /
)ss/ 0
;ss0 1
}tt 
elseuu 
{vv 
throwww 
newww 
	Exceptionww '
(ww' (
$strww( `
)ww` a
;wwa b
}xx 
}yy 
returnzz 
reszz 
;zz 
}{{ 	
public~~ 
bool~~ 
	UpdateDTO~~ 
(~~ 
UserDTO~~ %
userDTO~~& -
)~~- .
{ 	
bool
ÄÄ 
res
ÄÄ 
=
ÄÄ 
false
ÄÄ 
;
ÄÄ 
using
ÅÅ 
(
ÅÅ 
var
ÅÅ 
r
ÅÅ 
=
ÅÅ 
RepositoryFactory
ÅÅ ,
.
ÅÅ, -
CreateRepository
ÅÅ- =
(
ÅÅ= >
)
ÅÅ> ?
)
ÅÅ? @
{
ÇÇ 
var
ÉÉ 

userEntity
ÉÉ 
=
ÉÉ  
new
ÉÉ! $
Users
ÉÉ% *
{
ÑÑ 
UserId
ÖÖ 
=
ÖÖ 
userDTO
ÖÖ $
.
ÖÖ$ %
UserId
ÖÖ% +
,
ÖÖ+ ,
Username
ÜÜ 
=
ÜÜ 
userDTO
ÜÜ &
.
ÜÜ& '
Username
ÜÜ' /
,
ÜÜ/ 0
EmailAddress
áá  
=
áá! "
userDTO
áá# *
.
áá* +
EmailAddress
áá+ 7
,
áá7 8
	FirstName
àà 
=
àà 
userDTO
àà  '
.
àà' (
	FirstName
àà( 1
,
àà1 2
LastName
ââ 
=
ââ 
userDTO
ââ &
.
ââ& '
LastName
ââ' /
,
ââ/ 0
Rol
ää 
=
ää 
userDTO
ää !
.
ää! "
Rol
ää" %
}
ãã 
;
ãã 
Users
çç 
existingUser
çç "
=
çç# $
r
çç% &
.
çç& '
Retrieve
çç' /
<
çç/ 0
Users
çç0 5
>
çç5 6
(
çç6 7
u
çç7 8
=>
çç9 ;
u
çç< =
.
çç= >
Username
çç> F
==
ççG I

userEntity
ççJ T
.
ççT U
Username
ççU ]
&&
çç^ `
u
çça b
.
ççb c
UserId
ççc i
!=
ççj l

userEntity
ççm w
.
ççw x
UserId
ççx ~
)
çç~ 
;çç Ä
if
éé 
(
éé 
existingUser
éé  
==
éé! #
null
éé$ (
)
éé( )
{
èè 
res
êê 
=
êê 
r
êê 
.
êê 
Update
êê "
(
êê" #

userEntity
êê# -
)
êê- .
;
êê. /
}
ëë 
else
íí 
{
ìì 
throw
îî 
new
îî 
	Exception
îî '
(
îî' (
$str
îî( `
)
îî` a
;
îîa b
}
ïï 
}
ññ 
return
óó 
res
óó 
;
óó 
}
òò 	
public
õõ 
bool
õõ 
Delete
õõ 
(
õõ 
int
õõ 
id
õõ !
)
õõ! "
{
úú 	
bool
ùù 
res
ùù 
=
ùù 
false
ùù 
;
ùù 
var
ûû 
user
ûû 
=
ûû 
RetrieveById
ûû #
(
ûû# $
id
ûû$ &
)
ûû& '
;
ûû' (
if
üü 
(
üü 
user
üü 
!=
üü 
null
üü 
)
üü 
{
†† 
using
°° 
(
°° 
var
°° 
r
°° 
=
°° 
RepositoryFactory
°° 0
.
°°0 1
CreateRepository
°°1 A
(
°°A B
)
°°B C
)
°°C D
{
¢¢ 
res
££ 
=
££ 
r
££ 
.
££ 
Delete
££ "
(
££" #
user
££# '
)
££' (
;
££( )
}
§§ 
}
•• 
else
¶¶ 
{
ßß 
throw
®® 
new
®® 
	Exception
®® #
(
®®# $
$str
®®$ ;
)
®®; <
;
®®< =
}
©© 
return
™™ 
res
™™ 
;
™™ 
}
´´ 	
public
ÆÆ 
List
ÆÆ 
<
ÆÆ 
Users
ÆÆ 
>
ÆÆ 
Filter
ÆÆ !
(
ÆÆ! "
string
ÆÆ" (
username
ÆÆ) 1
)
ÆÆ1 2
{
ØØ 	
List
∞∞ 
<
∞∞ 
Users
∞∞ 
>
∞∞ 
res
∞∞ 
=
∞∞ 
null
∞∞ "
;
∞∞" #
using
±± 
(
±± 
var
±± 
r
±± 
=
±± 
RepositoryFactory
±± ,
.
±±, -
CreateRepository
±±- =
(
±±= >
)
±±> ?
)
±±? @
{
≤≤ 
res
≥≥ 
=
≥≥ 
r
≥≥ 
.
≥≥ 
Filter
≥≥ 
<
≥≥ 
Users
≥≥ $
>
≥≥$ %
(
≥≥% &
u
≥≥& '
=>
≥≥( *
u
≥≥+ ,
.
≥≥, -
Username
≥≥- 5
.
≥≥5 6
Contains
≥≥6 >
(
≥≥> ?
username
≥≥? G
)
≥≥G H
)
≥≥H I
;
≥≥I J
}
¥¥ 
return
µµ 
res
µµ 
;
µµ 
}
∂∂ 	
public
ππ 
List
ππ 
<
ππ 
UserDTO
ππ 
>
ππ 
FilterUsersDTO
ππ +
(
ππ+ ,
string
ππ, 2
username
ππ3 ;
)
ππ; <
{
∫∫ 	
List
ªª 
<
ªª 
UserDTO
ªª 
>
ªª 
res
ªª 
=
ªª 
null
ªª  $
;
ªª$ %
using
ºº 
(
ºº 
var
ºº 
r
ºº 
=
ºº 
RepositoryFactory
ºº ,
.
ºº, -
CreateRepository
ºº- =
(
ºº= >
)
ºº> ?
)
ºº? @
{
ΩΩ 
var
ææ 
users
ææ 
=
ææ 
r
ææ 
.
ææ 
Filter
ææ $
<
ææ$ %
Users
ææ% *
>
ææ* +
(
ææ+ ,
u
ææ, -
=>
ææ. 0
u
ææ1 2
.
ææ2 3
Username
ææ3 ;
.
ææ; <
Contains
ææ< D
(
ææD E
username
ææE M
)
ææM N
)
ææN O
;
ææO P
res
øø 
=
øø 
users
øø 
.
øø 
Select
øø "
(
øø" #
u
øø# $
=>
øø% '
new
øø( +
UserDTO
øø, 3
{
¿¿ 
UserId
¡¡ 
=
¡¡ 
u
¡¡ 
.
¡¡ 
UserId
¡¡ %
,
¡¡% &
Username
¬¬ 
=
¬¬ 
u
¬¬  
.
¬¬  !
Username
¬¬! )
,
¬¬) *
EmailAddress
√√  
=
√√! "
u
√√# $
.
√√$ %
EmailAddress
√√% 1
,
√√1 2
	FirstName
ƒƒ 
=
ƒƒ 
u
ƒƒ  !
.
ƒƒ! "
	FirstName
ƒƒ" +
,
ƒƒ+ ,
LastName
≈≈ 
=
≈≈ 
u
≈≈  
.
≈≈  !
LastName
≈≈! )
,
≈≈) *
Rol
∆∆ 
=
∆∆ 
u
∆∆ 
.
∆∆ 
Rol
∆∆ 
}
«« 
)
«« 
.
«« 
ToList
«« 
(
«« 
)
«« 
;
«« 
}
»» 
return
…… 
res
…… 
;
…… 
}
   	
public
ÕÕ 
bool
ÕÕ 
UsernameExists
ÕÕ "
(
ÕÕ" #
string
ÕÕ# )
username
ÕÕ* 2
)
ÕÕ2 3
{
ŒŒ 	
bool
œœ 
exists
œœ 
=
œœ 
false
œœ 
;
œœ  
using
–– 
(
–– 
var
–– 
r
–– 
=
–– 
RepositoryFactory
–– ,
.
––, -
CreateRepository
––- =
(
––= >
)
––> ?
)
––? @
{
—— 
exists
”” 
=
”” 
r
”” 
.
”” 
Retrieve
”” #
<
””# $
Users
””$ )
>
””) *
(
””* +
u
””+ ,
=>
””- /
u
””0 1
.
””1 2
Username
””2 :
==
””; =
username
””> F
)
””F G
!=
””H J
null
””K O
;
””O P
}
‘‘ 
return
’’ 
exists
’’ 
;
’’ 
}
÷÷ 	
public
◊◊ 
bool
◊◊ #
UsernameOrEmailExists
◊◊ )
(
◊◊) *
string
◊◊* 0
username
◊◊1 9
,
◊◊9 :
string
◊◊; A
email
◊◊B G
)
◊◊G H
{
ÿÿ 	
bool
ŸŸ 
exists
ŸŸ 
=
ŸŸ 
false
ŸŸ 
;
ŸŸ  
using
⁄⁄ 
(
⁄⁄ 
var
⁄⁄ 
r
⁄⁄ 
=
⁄⁄ 
RepositoryFactory
⁄⁄ ,
.
⁄⁄, -
CreateRepository
⁄⁄- =
(
⁄⁄= >
)
⁄⁄> ?
)
⁄⁄? @
{
€€ 
exists
›› 
=
›› 
r
›› 
.
›› 
Retrieve
›› #
<
››# $
Users
››$ )
>
››) *
(
››* +
u
››+ ,
=>
››- /
u
››0 1
.
››1 2
Username
››2 :
==
››; =
username
››> F
||
››G I
u
››J K
.
››K L
EmailAddress
››L X
==
››Y [
email
››\ a
)
››a b
!=
››c e
null
››f j
;
››j k
}
ﬁﬁ 
return
ﬂﬂ 
exists
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
public
‰‰ 
UserDTO
‰‰ 
Authenticate
‰‰ #
(
‰‰# $
string
‰‰$ *
username
‰‰+ 3
,
‰‰3 4
string
‰‰5 ;
password
‰‰< D
)
‰‰D E
{
ÂÂ 	
UserDTO
ÊÊ 
res
ÊÊ 
=
ÊÊ 
null
ÊÊ 
;
ÊÊ 
using
ËË 
(
ËË 
var
ËË 
r
ËË 
=
ËË 
RepositoryFactory
ËË ,
.
ËË, -
CreateRepository
ËË- =
(
ËË= >
)
ËË> ?
)
ËË? @
{
ÈÈ 
Users
ÎÎ 
user
ÎÎ 
=
ÎÎ 
r
ÎÎ 
.
ÎÎ 
Retrieve
ÎÎ '
<
ÎÎ' (
Users
ÎÎ( -
>
ÎÎ- .
(
ÎÎ. /
u
ÎÎ/ 0
=>
ÎÎ1 3
u
ÎÎ4 5
.
ÎÎ5 6
Username
ÎÎ6 >
==
ÎÎ? A
username
ÎÎB J
.
ÎÎJ K
ToLower
ÎÎK R
(
ÎÎR S
)
ÎÎS T
||
ÎÎU W
u
ÎÎX Y
.
ÎÎY Z
EmailAddress
ÎÎZ f
==
ÎÎg i
username
ÎÎj r
.
ÎÎr s
ToLower
ÎÎs z
(
ÎÎz {
)
ÎÎ{ |
)
ÎÎ| }
;
ÎÎ} ~
if
ÌÌ 
(
ÌÌ 
user
ÌÌ 
!=
ÌÌ 
null
ÌÌ  
)
ÌÌ  !
{
ÓÓ 
if
 
(
 
BCrypt
 
.
 
Net
 "
.
" #
BCrypt
# )
.
) *
Verify
* 0
(
0 1
password
1 9
,
9 :
user
; ?
.
? @
Password
@ H
)
H I
)
I J
{
ÒÒ 
res
ÛÛ 
=
ÛÛ 
new
ÛÛ !
UserDTO
ÛÛ" )
{
ÙÙ 
UserId
ıı "
=
ıı# $
user
ıı% )
.
ıı) *
UserId
ıı* 0
,
ıı0 1
Username
ˆˆ $
=
ˆˆ% &
user
ˆˆ' +
.
ˆˆ+ ,
Username
ˆˆ, 4
,
ˆˆ4 5
EmailAddress
˜˜ (
=
˜˜) *
user
˜˜+ /
.
˜˜/ 0
EmailAddress
˜˜0 <
,
˜˜< =
	FirstName
¯¯ %
=
¯¯& '
user
¯¯( ,
.
¯¯, -
	FirstName
¯¯- 6
,
¯¯6 7
LastName
˘˘ $
=
˘˘% &
user
˘˘' +
.
˘˘+ ,
LastName
˘˘, 4
,
˘˘4 5
Rol
˙˙ 
=
˙˙  !
user
˙˙" &
.
˙˙& '
Rol
˙˙' *
}
˚˚ 
;
˚˚ 
}
¸¸ 
else
˝˝ 
{
˛˛ 
return
ˇˇ 
null
ˇˇ #
;
ˇˇ# $
}
ÄÄ 
}
ÅÅ 
}
ÇÇ 
return
ÑÑ 
res
ÑÑ 
;
ÑÑ 
}
ÖÖ 	
public
áá 
string
áá 
GetEmail
áá 
(
áá 
string
áá %
username
áá& .
)
áá. /
{
àà 	
string
ââ 
email
ââ 
=
ââ 
null
ââ 
;
ââ  
using
ãã 
(
ãã 
var
ãã 
r
ãã 
=
ãã 
RepositoryFactory
ãã ,
.
ãã, -
CreateRepository
ãã- =
(
ãã= >
)
ãã> ?
)
ãã? @
{
åå 
Users
éé 
user
éé 
=
éé 
r
éé 
.
éé 
Retrieve
éé '
<
éé' (
Users
éé( -
>
éé- .
(
éé. /
u
éé/ 0
=>
éé1 3
u
éé4 5
.
éé5 6
Username
éé6 >
==
éé? A
username
ééB J
.
ééJ K
ToLower
ééK R
(
ééR S
)
ééS T
)
ééT U
;
ééU V
if
ëë 
(
ëë 
user
ëë 
!=
ëë 
null
ëë  
)
ëë  !
{
íí 
email
ìì 
=
ìì 
user
ìì  
.
ìì  !
EmailAddress
ìì! -
;
ìì- .
}
îî 
}
ïï 
return
óó 
email
óó 
;
óó 
}
òò 	
}
öö 
}õõ Ñ	
ED:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\UserDTO.cs
	namespace 	
BLL
 
{ 
public

 

class

 
UserDTO

 
{ 
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
EmailAddress "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Rol 
{ 
get 
;  
set! $
;$ %
}& '
} 
} Ä
UD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 
) 
]  
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str  
)  !
]! "
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *¿Ö
JD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\ProductLogic.cs
	namespace		 	
BLL		
 
{

 
public 

class 
ProductLogic 
{ 
public 
Products 
Create 
( 
Products '
products( 0
)0 1
{ 	
Products 
res 
= 
null 
;  
using 
( 
var 
r 
= 
RepositoryFactory +
.+ ,
CreateRepository, <
(< =
)= >
)> ?
{ 
Products 
result 
=  !
r" #
.# $
Retrieve$ ,
<, -
Products- 5
>5 6
(6 7
p7 8
=>8 :
p: ;
.; <
ProductName< G
==G I
productsI Q
.Q R
ProductNameR ]
)] ^
;^ _
if 
( 
result 
== 
null !
)! "
{ 
res 
= 
r 
. 
Create "
(" #
products# +
)+ ,
;, -
} 
else 
{ 
} 
return 
res 
; 
} 
}   	
public!! 

ProductDTO!! 
	CreateDTO!! #
(!!# $

ProductDTO!!$ .

productDTO!!/ 9
)!!9 :
{"" 	

ProductDTO## 
res## 
=## 
null## !
;##! "
using$$ 
($$ 
var$$ 
r$$ 
=$$ 
RepositoryFactory$$ ,
.$$, -
CreateRepository$$- =
($$= >
)$$> ?
)$$? @
{%% 
var'' 
productEntity'' !
=''" #
new''$ '
Products''( 0
{(( 
ProductName)) 
=))  !

productDTO))" ,
.)), -
ProductName))- 8
,))8 9
	UnitPrice** 
=** 

productDTO**  *
.*** +
	UnitPrice**+ 4
,**4 5
UnitsInStock++  
=++! "

productDTO++# -
.++- .
UnitsInStock++. :
,++: ;

CategoryID,, 
=,,  

productDTO,,! +
.,,+ ,

CategoryID,,, 6
}-- 
;-- 
Products00 
existingProduct00 (
=00) *
r00+ ,
.00, -
Retrieve00- 5
<005 6
Products006 >
>00> ?
(00? @
p00@ A
=>00B D
p00E F
.00F G
ProductName00G R
==00S U
productEntity00V c
.00c d
ProductName00d o
)00o p
;00p q
if22 
(22 
existingProduct22 #
==22$ &
null22' +
)22+ ,
{33 
Products55 
createdProduct55 +
=55, -
r55. /
.55/ 0
Create550 6
(556 7
productEntity557 D
)55D E
;55E F
res88 
=88 
new88 

ProductDTO88 (
{99 
	ProductID:: !
=::" #
createdProduct::$ 2
.::2 3
	ProductID::3 <
,::< =
ProductName;; #
=;;$ %
createdProduct;;& 4
.;;4 5
ProductName;;5 @
,;;@ A
	UnitPrice<< !
=<<" #
createdProduct<<$ 2
.<<2 3
	UnitPrice<<3 <
,<<< =
UnitsInStock== $
===% &
createdProduct==' 5
.==5 6
UnitsInStock==6 B
,==B C

CategoryID>> "
=>># $
createdProduct>>% 3
.>>3 4

CategoryID>>4 >
}?? 
;?? 
}@@ 
elseAA 
{BB 
throwDD 
newDD 
	ExceptionDD '
(DD' (
$strDD( P
)DDP Q
;DDQ R
}EE 
}FF 
returnGG 
resGG 
;GG 
}HH 	
publicLL 
ProductsLL 
RetrieveByIdLL $
(LL$ %
intLL% (
idLL) +
)LL+ ,
{MM 	
ProductsNN 
resNN 
=NN 
nullNN 
;NN  
usingOO 
(OO 
varOO 
rOO 
=OO 
RepositoryFactoryOO ,
.OO, -
CreateRepositoryOO- =
(OO= >
)OO> ?
)OO? @
{PP 
resQQ 
=QQ 
rQQ 
.QQ 
RetrieveQQ  
<QQ  !
ProductsQQ! )
>QQ) *
(QQ* +
pQQ+ ,
=>QQ- /
pQQ0 1
.QQ1 2
	ProductIDQQ2 ;
==QQ; =
idQQ> @
)QQ@ A
;QQA B
}SS 
returnTT 
resTT 
;TT 
}VV 	
publicXX 
boolXX 
UpdateXX 
(XX 
ProductsXX #
productToUpdateXX$ 3
)XX3 4
{YY 	
boolZZ 
resZZ 
=ZZ 
falseZZ 
;ZZ 
using[[ 
([[ 
var[[ 
r[[ 
=[[ 
RepositoryFactory[[ ,
.[[, -
CreateRepository[[- =
([[= >
)[[> ?
)[[? @
{\\ 
Products^^ 
temp^^ 
=^^ 
r^^  
.^^  !
Retrieve^^! )
<^^) *
Products^^* 2
>^^2 3
(^^3 4
p^^4 5
=>^^5 7
p^^7 8
.^^8 9
ProductName^^9 D
==^^D F
productToUpdate^^F U
.^^U V
ProductName^^V a
&&^^b d
p__ 
.__ 
	ProductID__ 
!=__ 
productToUpdate__ ,
.__, -
	ProductID__- 6
)__6 7
;__7 8
if`` 
(`` 
temp`` 
==`` 
null`` 
)``  
{aa 
resbb 
=bb 
rbb 
.bb 
Updatebb  
(bb  !
productToUpdatebb! 0
)bb0 1
;bb1 2
}cc 
elsedd 
{ee 
}gg 
}hh 
returnii 
resii 
;ii 
}kk 	
publicmm 
boolmm 
	UpdateDTOmm 
(mm 

ProductDTOmm (
productToUpdatemm) 8
)mm8 9
{nn 	
booloo 
resoo 
=oo 
falseoo 
;oo 
usingpp 
(pp 
varpp 
rpp 
=pp 
RepositoryFactorypp ,
.pp, -
CreateRepositorypp- =
(pp= >
)pp> ?
)pp? @
{qq 
varss 
productEntityss !
=ss" #
newss$ '
Productsss( 0
{tt 
	ProductIDuu 
=uu 
productToUpdateuu  /
.uu/ 0
	ProductIDuu0 9
,uu9 :
ProductNamevv 
=vv  !
productToUpdatevv" 1
.vv1 2
ProductNamevv2 =
,vv= >
	UnitPriceww 
=ww 
productToUpdateww  /
.ww/ 0
	UnitPriceww0 9
,ww9 :
UnitsInStockxx  
=xx! "
productToUpdatexx# 2
.xx2 3
UnitsInStockxx3 ?
,xx? @

CategoryIDyy 
=yy  
productToUpdateyy! 0
.yy0 1

CategoryIDyy1 ;
}zz 
;zz 
Products}} 
temp}} 
=}} 
r}}  !
.}}! "
Retrieve}}" *
<}}* +
Products}}+ 3
>}}3 4
(}}4 5
p}}5 6
=>}}7 9
p}}: ;
.}}; <
ProductName}}< G
==}}H J
productEntity}}K X
.}}X Y
ProductName}}Y d
&&}}e g
p~~: ;
.~~; <
	ProductID~~< E
!=~~F H
productEntity~~I V
.~~V W
	ProductID~~W `
)~~` a
;~~a b
if
ÄÄ 
(
ÄÄ 
temp
ÄÄ 
==
ÄÄ 
null
ÄÄ  
)
ÄÄ  !
{
ÅÅ 
res
ÉÉ 
=
ÉÉ 
r
ÉÉ 
.
ÉÉ 
Update
ÉÉ "
(
ÉÉ" #
productEntity
ÉÉ# 0
)
ÉÉ0 1
;
ÉÉ1 2
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
throw
àà 
new
àà 
	Exception
àà '
(
àà' (
$str
àà( V
)
ààV W
;
ààW X
}
ââ 
}
ää 
return
ãã 
res
ãã 
;
ãã 
}
åå 	
public
èè 
bool
èè 
Delete
èè 
(
èè 
int
èè 
id
èè !
)
èè! "
{
êê 	
bool
ëë 
res
ëë 
=
ëë 
false
ëë 
;
ëë 
var
ìì 
product
ìì 
=
ìì 
RetrieveById
ìì $
(
ìì$ %
id
ìì% '
)
ìì' (
;
ìì( )
if
îî 
(
îî 
product
îî 
!=
îî 
null
îî 
)
îî  
{
ïï 
if
ññ 
(
ññ 
product
ññ 
.
ññ 
UnitsInStock
ññ (
!=
ññ) +
$num
ññ, -
)
ññ- .
{
óó 
using
òò 
(
òò 
var
òò 
r
òò  
=
òò! "
RepositoryFactory
òò# 4
.
òò4 5
CreateRepository
òò5 E
(
òòE F
)
òòF G
)
òòG H
{
ôô 
res
õõ 
=
õõ 
r
õõ 
.
õõ  
Delete
õõ  &
(
õõ& '
product
õõ' .
)
õõ. /
;
õõ/ 0
}
ùù 
}
üü 
else
†† 
{
°° 
}
££ 
}
§§ 
else
•• 
{
¶¶ 
}
®® 
return
©© 
res
©© 
;
©© 
}
™™ 	
public
¨¨ 
List
¨¨ 
<
¨¨ 
Products
¨¨ 
>
¨¨ 
Filter
¨¨ $
(
¨¨$ %
string
¨¨% +
name
¨¨, 0
)
¨¨0 1
{
≠≠ 	
List
ÆÆ 
<
ÆÆ 
Products
ÆÆ 
>
ÆÆ 
res
ÆÆ 
=
ÆÆ  
null
ÆÆ! %
;
ÆÆ% &
using
ØØ 
(
ØØ 
var
ØØ 
r
ØØ 
=
ØØ 
RepositoryFactory
ØØ ,
.
ØØ, -
CreateRepository
ØØ- =
(
ØØ= >
)
ØØ> ?
)
ØØ? @
{
∞∞ 
res
≤≤ 
=
≤≤ 
r
≤≤ 
.
≤≤ 
Filter
≤≤ 
<
≤≤ 
Products
≤≤ '
>
≤≤' (
(
≤≤( )
p
≤≤) *
=>
≤≤* ,
p
≤≤, -
.
≤≤- .
ProductName
≤≤. 9
==
≤≤9 ;
name
≤≤; ?
)
≤≤? @
;
≤≤@ A
}
¥¥ 
return
µµ 
res
µµ 
;
µµ 
}
∂∂ 	
public
∏∏ 

ProductDTO
∏∏ 
GetProductById
∏∏ (
(
∏∏( )
int
∏∏) ,
id
∏∏- /
)
∏∏/ 0
{
ππ 	

ProductDTO
∫∫ 

productDTO
∫∫ !
=
∫∫" #
null
∫∫$ (
;
∫∫( )
using
ºº 
(
ºº 
var
ºº 
r
ºº 
=
ºº 
RepositoryFactory
ºº ,
.
ºº, -
CreateRepository
ºº- =
(
ºº= >
)
ºº> ?
)
ºº? @
{
ΩΩ 
var
øø 
product
øø 
=
øø 
r
øø 
.
øø  
Retrieve
øø  (
<
øø( )
Products
øø) 1
>
øø1 2
(
øø2 3
p
øø3 4
=>
øø5 7
p
øø8 9
.
øø9 :
	ProductID
øø: C
==
øøD F
id
øøG I
)
øøI J
;
øøJ K
if
¡¡ 
(
¡¡ 
product
¡¡ 
!=
¡¡ 
null
¡¡ #
)
¡¡# $
{
¬¬ 

productDTO
ƒƒ 
=
ƒƒ  
new
ƒƒ! $

ProductDTO
ƒƒ% /
{
≈≈ 
	ProductID
∆∆ !
=
∆∆" #
product
∆∆$ +
.
∆∆+ ,
	ProductID
∆∆, 5
,
∆∆5 6
ProductName
«« #
=
««$ %
product
««& -
.
««- .
ProductName
««. 9
,
««9 :
	UnitPrice
»» !
=
»»" #
product
»»$ +
.
»»+ ,
	UnitPrice
»», 5
,
»»5 6
UnitsInStock
…… $
=
……% &
product
……' .
.
……. /
UnitsInStock
……/ ;
,
……; <

CategoryID
   "
=
  # $
product
  % ,
.
  , -

CategoryID
  - 7
,
  7 8
}
ÃÃ 
;
ÃÃ 
}
ÕÕ 
}
ŒŒ 
return
–– 

productDTO
–– 
;
–– 
}
—— 	
public
”” 
List
”” 
<
”” 

ProductDTO
”” 
>
”” 
FilterProducts
””  .
(
””. /
string
””/ 5
name
””6 :
)
””: ;
{
‘‘ 	
List
’’ 
<
’’ 

ProductDTO
’’ 
>
’’ 
res
’’  
=
’’! "
null
’’# '
;
’’' (
using
◊◊ 
(
◊◊ 
var
◊◊ 
r
◊◊ 
=
◊◊ 
RepositoryFactory
◊◊ ,
.
◊◊, -
CreateRepository
◊◊- =
(
◊◊= >
)
◊◊> ?
)
◊◊? @
{
ÿÿ 
var
⁄⁄ 
products
⁄⁄ 
=
⁄⁄ 
r
⁄⁄  
.
⁄⁄  !
Filter
⁄⁄! '
<
⁄⁄' (
Products
⁄⁄( 0
>
⁄⁄0 1
(
⁄⁄1 2
p
⁄⁄2 3
=>
⁄⁄4 6
p
⁄⁄7 8
.
⁄⁄8 9
ProductName
⁄⁄9 D
.
⁄⁄D E
Equals
⁄⁄E K
(
⁄⁄K L
name
⁄⁄L P
)
⁄⁄P Q
)
⁄⁄Q R
;
⁄⁄R S
res
›› 
=
›› 
products
›› 
.
›› 
Select
›› %
(
››% &
p
››& '
=>
››( *
new
››+ .

ProductDTO
››/ 9
{
ﬁﬁ 
	ProductID
ﬂﬂ 
=
ﬂﬂ 
p
ﬂﬂ  !
.
ﬂﬂ! "
	ProductID
ﬂﬂ" +
,
ﬂﬂ+ ,
ProductName
‡‡ 
=
‡‡  !
p
‡‡" #
.
‡‡# $
ProductName
‡‡$ /
,
‡‡/ 0
	UnitPrice
·· 
=
·· 
p
··  !
.
··! "
	UnitPrice
··" +
,
··+ ,
UnitsInStock
‚‚  
=
‚‚! "
p
‚‚# $
.
‚‚$ %
UnitsInStock
‚‚% 1
,
‚‚1 2

CategoryID
„„ 
=
„„  
p
„„! "
.
„„" #

CategoryID
„„# -
,
„„- .
}
ÂÂ 
)
ÂÂ 
.
ÂÂ 
ToList
ÂÂ 
(
ÂÂ 
)
ÂÂ 
;
ÂÂ 
}
ÊÊ 
return
ËË 
res
ËË 
;
ËË 
}
ÈÈ 	
public
ÎÎ 
List
ÎÎ 
<
ÎÎ 

ProductDTO
ÎÎ 
>
ÎÎ +
FilterProductsDTOByCategoryID
ÎÎ  =
(
ÎÎ= >
int
ÎÎ> A
ID
ÎÎB D
)
ÎÎD E
{
ÏÏ 	
List
ÌÌ 
<
ÌÌ 

ProductDTO
ÌÌ 
>
ÌÌ 
res
ÌÌ  
=
ÌÌ! "
null
ÌÌ# '
;
ÌÌ' (
using
ÔÔ 
(
ÔÔ 
var
ÔÔ 
r
ÔÔ 
=
ÔÔ 
RepositoryFactory
ÔÔ ,
.
ÔÔ, -
CreateRepository
ÔÔ- =
(
ÔÔ= >
)
ÔÔ> ?
)
ÔÔ? @
{
 
var
ÚÚ 
products
ÚÚ 
=
ÚÚ 
r
ÚÚ  
.
ÚÚ  !
Filter
ÚÚ! '
<
ÚÚ' (
Products
ÚÚ( 0
>
ÚÚ0 1
(
ÚÚ1 2
p
ÚÚ2 3
=>
ÚÚ4 6
p
ÚÚ7 8
.
ÚÚ8 9

CategoryID
ÚÚ9 C
==
ÚÚD F
ID
ÚÚG I
)
ÚÚI J
;
ÚÚJ K
res
ıı 
=
ıı 
products
ıı 
.
ıı 
Select
ıı %
(
ıı% &
p
ıı& '
=>
ıı( *
new
ıı+ .

ProductDTO
ıı/ 9
{
ˆˆ 
	ProductID
˜˜ 
=
˜˜ 
p
˜˜  !
.
˜˜! "
	ProductID
˜˜" +
,
˜˜+ ,
ProductName
¯¯ 
=
¯¯  !
p
¯¯" #
.
¯¯# $
ProductName
¯¯$ /
,
¯¯/ 0
	UnitPrice
˘˘ 
=
˘˘ 
p
˘˘  !
.
˘˘! "
	UnitPrice
˘˘" +
,
˘˘+ ,
UnitsInStock
˙˙  
=
˙˙! "
p
˙˙# $
.
˙˙$ %
UnitsInStock
˙˙% 1
,
˙˙1 2

CategoryID
˚˚ 
=
˚˚  
p
˚˚! "
.
˚˚" #

CategoryID
˚˚# -
}
˝˝ 
)
˝˝ 
.
˝˝ 
ToList
˝˝ 
(
˝˝ 
)
˝˝ 
;
˝˝ 
}
˛˛ 
return
ÄÄ 
res
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
}
ÑÑ 
}ÖÖ ñ	
HD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\ProductDTO.cs
	namespace 	
BLL
 
{ 
public

 

class

 

ProductDTO

 
{ 
public 
int 
	ProductID 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ProductName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
decimal 
	UnitPrice  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
UnitsInStock 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 

CategoryID 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CategoryName "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} õY
PD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\LoginAttemptsLogic.cs
	namespace 	
BLL
 
{ 
public		 

class		 
LoginAttemptsLogic		 #
{

 
public 
bool  
RegisterLoginAttempt (
(( )
string) /
username0 8
)8 9
{ 	
bool 
	isBlocked 
= 
false "
;" #
using 
( 
var 

repository !
=" #
RepositoryFactory$ 5
.5 6
CreateRepository6 F
(F G
)G H
)H I
{ 
var 
loginAttempt  
=! "

repository# -
.- .
Retrieve. 6
<6 7
LoginAttempts7 D
>D E
(E F
lF G
=>H J
lK L
.L M
UsernameM U
==V X
usernameY a
)a b
;b c
if 
( 
loginAttempt  
==! #
null$ (
)( )
{ 
loginAttempt  
=! "
new# &
LoginAttempts' 4
{ 
Username  
=! "
username# +
,+ ,
AttemptCount $
=% &
$num' (
,( )
LastAttempt #
=$ %
DateTime& .
.. /
Now/ 2
,2 3
	IsBlocked !
=" #
false$ )
,) *

BlockUntil "
=# $
null% )
} 
; 

repository 
. 
Create %
(% &
loginAttempt& 2
)2 3
;3 4
}   
else!! 
{"" 
loginAttempt$$  
.$$  !
AttemptCount$$! -
++$$- /
;$$/ 0
loginAttempt%%  
.%%  !
LastAttempt%%! ,
=%%- .
DateTime%%/ 7
.%%7 8
Now%%8 ;
;%%; <
if(( 
((( 
loginAttempt(( $
.(($ %
AttemptCount((% 1
>=((2 4
$num((5 6
)((6 7
{)) 
loginAttempt** $
.**$ %
	IsBlocked**% .
=**/ 0
true**1 5
;**5 6
loginAttempt++ $
.++$ %

BlockUntil++% /
=++0 1
DateTime++2 :
.++: ;
Now++; >
.++> ?

AddMinutes++? I
(++I J
$num++J K
)++K L
;++L M
},, 

repository.. 
... 
Update.. %
(..% &
loginAttempt..& 2
)..2 3
;..3 4
}// 
	isBlocked11 
=11 
loginAttempt11 (
.11( )
	IsBlocked11) 2
;112 3
}22 
return33 
	isBlocked33 
;33 
}44 	
public77 
bool77 
IsAccountBlocked77 $
(77$ %
string77% +
username77, 4
)774 5
{88 	
using99 
(99 
var99 

repository99 !
=99" #
RepositoryFactory99$ 5
.995 6
CreateRepository996 F
(99F G
)99G H
)99H I
{:: 
var;; 
loginAttempt;;  
=;;! "

repository;;# -
.;;- .
Retrieve;;. 6
<;;6 7
LoginAttempts;;7 D
>;;D E
(;;E F
l;;F G
=>;;H J
l;;K L
.;;L M
Username;;M U
==;;V X
username;;Y a
);;a b
;;;b c
if== 
(== 
loginAttempt==  
!===! #
null==$ (
)==( )
{>> 
if@@ 
(@@ 
loginAttempt@@ $
.@@$ %
	IsBlocked@@% .
&&@@/ 1
loginAttempt@@2 >
.@@> ?

BlockUntil@@? I
.@@I J
HasValue@@J R
&&@@S U
loginAttempt@@V b
.@@b c

BlockUntil@@c m
<=@@n p
DateTime@@q y
.@@y z
Now@@z }
)@@} ~
{AA 
loginAttemptCC $
.CC$ %
	IsBlockedCC% .
=CC/ 0
falseCC1 6
;CC6 7
loginAttemptDD $
.DD$ %
AttemptCountDD% 1
=DD2 3
$numDD4 5
;DD5 6
loginAttemptEE $
.EE$ %

BlockUntilEE% /
=EE0 1
nullEE2 6
;EE6 7

repositoryFF "
.FF" #
UpdateFF# )
(FF) *
loginAttemptFF* 6
)FF6 7
;FF7 8
returnGG 
falseGG $
;GG$ %
}HH 
returnJJ 
loginAttemptJJ '
.JJ' (
	IsBlockedJJ( 1
;JJ1 2
}KK 
}LL 
returnMM 
falseMM 
;MM 
}NN 	
publicQQ 
boolQQ 
UnlockAccountQQ !
(QQ! "
stringQQ" (
usernameQQ) 1
)QQ1 2
{RR 	
usingSS 
(SS 
varSS 

repositorySS !
=SS" #
RepositoryFactorySS$ 5
.SS5 6
CreateRepositorySS6 F
(SSF G
)SSG H
)SSH I
{TT 
varUU 
loginAttemptUU  
=UU! "

repositoryUU# -
.UU- .
RetrieveUU. 6
<UU6 7
LoginAttemptsUU7 D
>UUD E
(UUE F
lUUF G
=>UUH J
lUUK L
.UUL M
UsernameUUM U
==UUV X
usernameUUY a
)UUa b
;UUb c
ifWW 
(WW 
loginAttemptWW  
!=WW! #
nullWW$ (
)WW( )
{XX 
loginAttemptYY  
.YY  !
	IsBlockedYY! *
=YY+ ,
falseYY- 2
;YY2 3
loginAttemptZZ  
.ZZ  !
AttemptCountZZ! -
=ZZ. /
$numZZ0 1
;ZZ1 2
loginAttempt[[  
.[[  !

BlockUntil[[! +
=[[, -
null[[. 2
;[[2 3
return]] 

repository]] %
.]]% &
Update]]& ,
(]], -
loginAttempt]]- 9
)]]9 :
;]]: ;
}^^ 
}__ 
return`` 
false`` 
;`` 
}aa 	
publicdd 
booldd 
ResetLoginAttemptsdd &
(dd& '
stringdd' -
usernamedd. 6
)dd6 7
{ee 	
usingff 
(ff 
varff 

repositoryff !
=ff" #
RepositoryFactoryff$ 5
.ff5 6
CreateRepositoryff6 F
(ffF G
)ffG H
)ffH I
{gg 
varhh 
loginAttempthh  
=hh! "

repositoryhh# -
.hh- .
Retrievehh. 6
<hh6 7
LoginAttemptshh7 D
>hhD E
(hhE F
lhhF G
=>hhH J
lhhK L
.hhL M
UsernamehhM U
==hhV X
usernamehhY a
)hha b
;hhb c
ifjj 
(jj 
loginAttemptjj  
!=jj! #
nulljj$ (
)jj( )
{kk 
loginAttemptll  
.ll  !
AttemptCountll! -
=ll. /
$numll0 1
;ll1 2
loginAttemptmm  
.mm  !
LastAttemptmm! ,
=mm- .
DateTimemm/ 7
.mm7 8
Nowmm8 ;
;mm; <
returnoo 

repositoryoo %
.oo% &
Updateoo& ,
(oo, -
loginAttemptoo- 9
)oo9 :
;oo: ;
}pp 
}qq 
returnrr 
falserr 
;rr 
}ss 	
publicvv 
Listvv 
<vv 
LoginAttemptsvv !
>vv! "
GetAllLoginAttemptsvv# 6
(vv6 7
)vv7 8
{ww 	
usingxx 
(xx 
varxx 

repositoryxx !
=xx" #
RepositoryFactoryxx$ 5
.xx5 6
CreateRepositoryxx6 F
(xxF G
)xxG H
)xxH I
{yy 
returnzz 

repositoryzz !
.zz! "
GetAllzz" (
<zz( )
LoginAttemptszz) 6
>zz6 7
(zz7 8
)zz8 9
;zz9 :
}{{ 
}|| 	
public 
LoginAttempts +
RetrieveLoginAttemptsByUsername <
(< =
string= C
usernameD L
)L M
{
ÄÄ 	
using
ÅÅ 
(
ÅÅ 
var
ÅÅ 

repository
ÅÅ !
=
ÅÅ" #
RepositoryFactory
ÅÅ$ 5
.
ÅÅ5 6
CreateRepository
ÅÅ6 F
(
ÅÅF G
)
ÅÅG H
)
ÅÅH I
{
ÇÇ 
var
ÑÑ 
loginAttempt
ÑÑ  
=
ÑÑ! "

repository
ÑÑ# -
.
ÑÑ- .
Retrieve
ÑÑ. 6
<
ÑÑ6 7
LoginAttempts
ÑÑ7 D
>
ÑÑD E
(
ÑÑE F
l
ÑÑF G
=>
ÑÑH J
l
ÑÑK L
.
ÑÑL M
Username
ÑÑM U
==
ÑÑV X
username
ÑÑY a
)
ÑÑa b
;
ÑÑb c
return
ÖÖ 
loginAttempt
ÖÖ #
;
ÖÖ# $
}
ÜÜ 
}
áá 	
public
ââ 
bool
ââ 

UserExists
ââ 
(
ââ 
string
ââ %
username
ââ& .
)
ââ. /
{
ää 	
using
ãã 
(
ãã 
var
ãã 

repository
ãã !
=
ãã" #
RepositoryFactory
ãã$ 5
.
ãã5 6
CreateRepository
ãã6 F
(
ããF G
)
ããG H
)
ããH I
{
åå 
var
çç 
loginAttempt
çç  
=
çç! "

repository
çç# -
.
çç- .
Retrieve
çç. 6
<
çç6 7
LoginAttempts
çç7 D
>
ççD E
(
ççE F
l
ççF G
=>
ççH J
l
ççK L
.
ççL M
Username
ççM U
==
ççV X
username
ççY a
)
çça b
;
ççb c
return
éé 
loginAttempt
éé #
!=
éé$ &
null
éé' +
;
éé+ ,
}
èè 
}
êê 	
public
ìì 
void
ìì 
CreateUserRecord
ìì $
(
ìì$ %
string
ìì% +
username
ìì, 4
)
ìì4 5
{
îî 	
using
ïï 
(
ïï 
var
ïï 

repository
ïï !
=
ïï" #
RepositoryFactory
ïï$ 5
.
ïï5 6
CreateRepository
ïï6 F
(
ïïF G
)
ïïG H
)
ïïH I
{
ññ 
var
óó 
loginAttempt
óó  
=
óó! "
new
óó# &
LoginAttempts
óó' 4
{
òò 
Username
ôô 
=
ôô 
username
ôô '
,
ôô' (
AttemptCount
öö  
=
öö! "
$num
öö# $
,
öö$ %
LastAttempt
õõ 
=
õõ  !
DateTime
õõ" *
.
õõ* +
Now
õõ+ .
,
õõ. /
	IsBlocked
úú 
=
úú 
false
úú  %
,
úú% &

BlockUntil
ùù 
=
ùù  
null
ùù! %
}
ûû 
;
ûû 

repository
†† 
.
†† 
Create
†† !
(
††! "
loginAttempt
††" .
)
††. /
;
††/ 0
}
°° 
}
¢¢ 	
}
•• 
}¶¶ „ô
KD:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\CategoryLogic.cs
	namespace

 	
BLL


 
{ 
public 

class 
CategoryLogic 
{ 
public 

Categories 
Create  
(  !

Categories! +
category, 4
)4 5
{ 	

Categories 
res 
= 
null !
;! "
using 
( 
var 
r 
= 
RepositoryFactory ,
., -
CreateRepository- =
(= >
)> ?
)? @
{ 

Categories 
existingCategory +
=, -
r. /
./ 0
Retrieve0 8
<8 9

Categories9 C
>C D
(D E
cE F
=>G I
cJ K
.K L
CategoryNameL X
==Y [
category\ d
.d e
CategoryNamee q
)q r
;r s
if 
( 
existingCategory $
==% '
null( ,
), -
{ 
res 
= 
r 
. 
Create "
(" #
category# +
)+ ,
;, -
} 
else 
{ 
throw 
new 
	Exception '
(' (
$str( A
)A B
;B C
} 
} 
return   
res   
;   
}!! 	
public$$ 

Categories$$ 
RetrieveById$$ &
($$& '
int$$' *
id$$+ -
)$$- .
{%% 	

Categories&& 
res&& 
=&& 
null&& !
;&&! "
using'' 
('' 
var'' 
r'' 
='' 
RepositoryFactory'' ,
.'', -
CreateRepository''- =
(''= >
)''> ?
)''? @
{(( 
res)) 
=)) 
r)) 
.)) 
Retrieve))  
<))  !

Categories))! +
>))+ ,
()), -
c))- .
=>))/ 1
c))2 3
.))3 4

CategoryID))4 >
==))? A
id))B D
)))D E
;))E F
}++ 
return,, 
res,, 
;,, 
}-- 	
public// 
CategoryDTO// 
GetCategoryById// *
(//* +
int//+ .
id/// 1
)//1 2
{00 	
CategoryDTO11 
categoryDTO11 #
=11$ %
null11& *
;11* +
using33 
(33 
var33 
r33 
=33 
RepositoryFactory33 ,
.33, -
CreateRepository33- =
(33= >
)33> ?
)33? @
{44 
var66 
category66 
=66 
r66  
.66  !
Retrieve66! )
<66) *

Categories66* 4
>664 5
(665 6
c666 7
=>668 :
c66; <
.66< =

CategoryID66= G
==66H J
id66K M
)66M N
;66N O
if99 
(99 
category99 
!=99 
null99  $
)99$ %
{:: 
categoryDTO<< 
=<<  !
new<<" %
CategoryDTO<<& 1
{== 

CategoryID>> "
=>># $
category>>% -
.>>- .

CategoryID>>. 8
,>>8 9
CategoryName?? $
=??% &
category??' /
.??/ 0
CategoryName??0 <
,??< =
Description@@ #
=@@$ %
category@@& .
.@@. /
Description@@/ :
,@@: ;
ProductsAA  
=AA! "
categoryAA# +
.AA+ ,
ProductsAA, 4
.AA4 5
SelectAA5 ;
(AA; <
pAA< =
=>AA> @
newAAA D

ProductDTOAAE O
{BB 
	ProductIDCC %
=CC& '
pCC( )
.CC) *
	ProductIDCC* 3
,CC3 4
ProductNameDD '
=DD( )
pDD* +
.DD+ ,
ProductNameDD, 7
,DD7 8
	UnitPriceEE %
=EE& '
pEE( )
.EE) *
	UnitPriceEE* 3
,EE3 4
UnitsInStockFF (
=FF) *
pFF+ ,
.FF, -
UnitsInStockFF- 9
,FF9 :

CategoryIDGG &
=GG' (
pGG) *
.GG* +

CategoryIDGG+ 5
,GG5 6
}II 
)II 
.II 
ToListII !
(II! "
)II" #
}JJ 
;JJ 
}KK 
}LL 
returnNN 
categoryDTONN 
;NN 
}OO 	
publicRR 
ListRR 
<RR 
CategoryDTORR 
>RR  
Filter1RR! (
(RR( )
stringRR) /
nameRR0 4
)RR4 5
{SS 	
ListTT 
<TT 
CategoryDTOTT 
>TT 
resTT !
=TT" #
nullTT$ (
;TT( )
usingVV 
(VV 
varVV 
rVV 
=VV 
RepositoryFactoryVV ,
.VV, -
CreateRepositoryVV- =
(VV= >
)VV> ?
)VV? @
{WW 
varYY 

categoriesYY 
=YY  
rYY! "
.YY" #
FilterYY# )
<YY) *

CategoriesYY* 4
>YY4 5
(YY5 6
cYY6 7
=>YY8 :
cYY; <
.YY< =
CategoryNameYY= I
.YYI J
ContainsYYJ R
(YYR S
nameYYS W
)YYW X
)YYX Y
;YYY Z
res\\ 
=\\ 

categories\\  
.\\  !
Select\\! '
(\\' (
c\\( )
=>\\* ,
new\\- 0
CategoryDTO\\1 <
{]] 

CategoryID^^ 
=^^  
c^^! "
.^^" #

CategoryID^^# -
,^^- .
CategoryName__  
=__! "
c__# $
.__$ %
CategoryName__% 1
,__1 2
Description`` 
=``  !
c``" #
.``# $
Description``$ /
,``/ 0
Productsaa 
=aa 
caa 
.aa 
Productsaa '
.aa' (
Selectaa( .
(aa. /
paa/ 0
=>aa1 3
newaa4 7

ProductDTOaa8 B
{bb 
	ProductIDcc !
=cc" #
pcc$ %
.cc% &
	ProductIDcc& /
,cc/ 0
ProductNamedd #
=dd$ %
pdd& '
.dd' (
ProductNamedd( 3
,dd3 4
	UnitPriceee !
=ee" #
pee$ %
.ee% &
	UnitPriceee& /
,ee/ 0
UnitsInStockff $
=ff% &
pff' (
.ff( )
UnitsInStockff) 5
,ff5 6

CategoryIDgg "
=gg# $
pgg% &
.gg& '

CategoryIDgg' 1
}ii 
)ii 
.ii 
ToListii 
(ii 
)ii 
}jj 
)jj 
.jj 
ToListjj 
(jj 
)jj 
;jj 
}kk 
returnmm 
resmm 
;mm 
}nn 	
publicss 
intss 
Updatess 
(ss 

Categoriesss $
categoryToUpdatess% 5
)ss5 6
{tt 	
booluu 
resuu 
=uu 
falseuu 
;uu 
usingvv 
(vv 
varvv 
rvv 
=vv 
RepositoryFactoryvv ,
.vv, -
CreateRepositoryvv- =
(vv= >
)vv> ?
)vv? @
{ww 

Categoriesyy 
existingCategoryyy +
=yy, -
ryy. /
.yy/ 0
Retrieveyy0 8
<yy8 9

Categoriesyy9 C
>yyC D
(yyD E
czz 
=>zz 
czz 
.zz 
CategoryNamezz '
==zz( *
categoryToUpdatezz+ ;
.zz; <
CategoryNamezz< H
&&zzI K
c{{ 
.{{ 

CategoryID{{ %
!={{& (
categoryToUpdate{{) 9
.{{9 :

CategoryID{{: D
){{D E
;{{E F
if|| 
(|| 
existingCategory|| $
==||% '
null||( ,
)||, -
{}} 
res~~ 
=~~ 
r~~ 
.~~ 
Update~~ "
(~~" #
categoryToUpdate~~# 3
)~~3 4
;~~4 5
} 
else
ÄÄ 
{
ÅÅ 
throw
ÉÉ 
new
ÉÉ 
	Exception
ÉÉ '
(
ÉÉ' (
$str
ÉÉ( W
)
ÉÉW X
;
ÉÉX Y
}
ÑÑ 
}
ÖÖ 
return
ÜÜ 
$num
ÜÜ 
;
ÜÜ 
}
áá 	
public
ââ 
bool
ââ 
	UpdateDTO
ââ 
(
ââ 
CategoryDTO
ââ )
categoryToUpdate
ââ* :
)
ââ: ;
{
ää 	
using
ãã 
(
ãã 
var
ãã 
r
ãã 
=
ãã 
RepositoryFactory
ãã ,
.
ãã, -
CreateRepository
ãã- =
(
ãã= >
)
ãã> ?
)
ãã? @
{
åå 
var
éé 
categoryEntity
éé "
=
éé# $
new
éé% (

Categories
éé) 3
{
èè 

CategoryID
êê 
=
êê  
categoryToUpdate
êê! 1
.
êê1 2

CategoryID
êê2 <
,
êê< =
CategoryName
ëë  
=
ëë! "
categoryToUpdate
ëë# 3
.
ëë3 4
CategoryName
ëë4 @
,
ëë@ A
Description
íí 
=
íí  !
categoryToUpdate
íí" 2
.
íí2 3
Description
íí3 >
}
ìì 
;
ìì 

Categories
ññ 
existingCategory
ññ +
=
ññ, -
r
ññ. /
.
ññ/ 0
Retrieve
ññ0 8
<
ññ8 9

Categories
ññ9 C
>
ññC D
(
ññD E
c
óó 
=>
óó 
c
óó 
.
óó 
CategoryName
óó '
==
óó( *
categoryEntity
óó+ 9
.
óó9 :
CategoryName
óó: F
&&
óóG I
c
òò 
.
òò 

CategoryID
òò %
!=
òò& (
categoryEntity
òò) 7
.
òò7 8

CategoryID
òò8 B
)
òòB C
;
òòC D
if
öö 
(
öö 
existingCategory
öö $
==
öö% '
null
öö( ,
)
öö, -
{
õõ 
bool
ùù 
result
ùù 
=
ùù  !
r
ùù" #
.
ùù# $
Update
ùù$ *
(
ùù* +
categoryEntity
ùù+ 9
)
ùù9 :
;
ùù: ;
return
†† 
result
†† !
;
††! "
}
°° 
else
¢¢ 
{
££ 
throw
•• 
new
•• 
	Exception
•• '
(
••' (
$str
••( W
)
••W X
;
••X Y
}
¶¶ 
}
ßß 
}
®® 	
public
¨¨ 
bool
¨¨ 
Delete
¨¨ 
(
¨¨ 
int
¨¨ 
id
¨¨ !
)
¨¨! "
{
≠≠ 	
bool
ÆÆ 
res
ÆÆ 
=
ÆÆ 
false
ÆÆ 
;
ÆÆ 
using
∞∞ 
(
∞∞ 
var
∞∞ 
r
∞∞ 
=
∞∞ 
RepositoryFactory
∞∞ ,
.
∞∞, -
CreateRepository
∞∞- =
(
∞∞= >
)
∞∞> ?
)
∞∞? @
{
±± 
var
≤≤ 
products
≤≤ 
=
≤≤ 
r
≤≤  
.
≤≤  !
Filter
≤≤! '
<
≤≤' (
Products
≤≤( 0
>
≤≤0 1
(
≤≤1 2
p
≤≤2 3
=>
≤≤4 6
p
≤≤7 8
.
≤≤8 9

CategoryID
≤≤9 C
==
≤≤D F
id
≤≤G I
)
≤≤I J
;
≤≤J K
if
≥≥ 
(
≥≥ 
products
≥≥ 
==
≥≥ 
null
≥≥  $
||
≥≥% '
products
≥≥( 0
.
≥≥0 1
Count
≥≥1 6
==
≥≥7 9
$num
≥≥: ;
)
≥≥; <
{
¥¥ 
var
µµ 
category
µµ  
=
µµ! "
RetrieveById
µµ# /
(
µµ/ 0
id
µµ0 2
)
µµ2 3
;
µµ3 4
if
∂∂ 
(
∂∂ 
category
∂∂  
!=
∂∂! #
null
∂∂$ (
)
∂∂( )
{
∑∑ 
res
∏∏ 
=
∏∏ 
r
∏∏ 
.
∏∏  
Delete
∏∏  &
(
∏∏& '
category
∏∏' /
)
∏∏/ 0
;
∏∏0 1
}
ππ 
else
∫∫ 
{
ªª 
throw
ºº 
new
ºº !
	Exception
ºº" +
(
ºº+ ,
$str
ºº, E
)
ººE F
;
ººF G
}
ΩΩ 
}
ææ 
else
øø 
{
¿¿ 
throw
¬¬ 
new
¬¬ 
	Exception
¬¬ '
(
¬¬' (
$str
¬¬( m
)
¬¬m n
;
¬¬n o
}
√√ 
}
ƒƒ 
return
≈≈ 
res
≈≈ 
;
≈≈ 
}
∆∆ 	
public
…… 
List
…… 
<
…… 

Categories
…… 
>
…… 
Filter
……  &
(
……& '
string
……' -
name
……. 2
)
……2 3
{
   	
List
ÀÀ 
<
ÀÀ 

Categories
ÀÀ 
>
ÀÀ 
res
ÀÀ  
=
ÀÀ! "
null
ÀÀ# '
;
ÀÀ' (
using
ÃÃ 
(
ÃÃ 
var
ÃÃ 
r
ÃÃ 
=
ÃÃ 
RepositoryFactory
ÃÃ ,
.
ÃÃ, -
CreateRepository
ÃÃ- =
(
ÃÃ= >
)
ÃÃ> ?
)
ÃÃ? @
{
ÕÕ 
res
ŒŒ 
=
ŒŒ 
r
ŒŒ 
.
ŒŒ 
Filter
ŒŒ 
<
ŒŒ 

Categories
ŒŒ )
>
ŒŒ) *
(
ŒŒ* +
c
ŒŒ+ ,
=>
ŒŒ- /
c
ŒŒ0 1
.
ŒŒ1 2
CategoryName
ŒŒ2 >
.
ŒŒ> ?
Contains
ŒŒ? G
(
ŒŒG H
name
ŒŒH L
)
ŒŒL M
)
ŒŒM N
;
ŒŒN O
}
œœ 
return
–– 
res
–– 
;
–– 
}
—— 	
public
““ 
CategoryDTO
““ 
	CreateDTO
““ $
(
““$ %
CategoryDTO
““% 0
categoryDTO
““1 <
)
““< =
{
”” 	
CategoryDTO
‘‘ 
res
‘‘ 
=
‘‘ 
null
‘‘ "
;
‘‘" #
using
÷÷ 
(
÷÷ 
var
÷÷ 
r
÷÷ 
=
÷÷ 
RepositoryFactory
÷÷ ,
.
÷÷, -
CreateRepository
÷÷- =
(
÷÷= >
)
÷÷> ?
)
÷÷? @
{
◊◊ 
var
ŸŸ 
categoryEntity
ŸŸ "
=
ŸŸ# $
new
ŸŸ% (

Categories
ŸŸ) 3
{
⁄⁄ 
CategoryName
€€  
=
€€! "
categoryDTO
€€# .
.
€€. /
CategoryName
€€/ ;
,
€€; <
Description
‹‹ 
=
‹‹  !
categoryDTO
‹‹" -
.
‹‹- .
Description
‹‹. 9
}
›› 
;
›› 

Categories
‡‡ 
existingCategory
‡‡ +
=
‡‡, -
r
‡‡. /
.
‡‡/ 0
Retrieve
‡‡0 8
<
‡‡8 9

Categories
‡‡9 C
>
‡‡C D
(
‡‡D E
c
‡‡E F
=>
‡‡G I
c
‡‡J K
.
‡‡K L
CategoryName
‡‡L X
==
‡‡Y [
categoryEntity
‡‡\ j
.
‡‡j k
CategoryName
‡‡k w
)
‡‡w x
;
‡‡x y
if
·· 
(
·· 
existingCategory
·· $
==
··% '
null
··( ,
)
··, -
{
‚‚ 

Categories
‰‰ 
createdCategory
‰‰ .
=
‰‰/ 0
r
‰‰1 2
.
‰‰2 3
Create
‰‰3 9
(
‰‰9 :
categoryEntity
‰‰: H
)
‰‰H I
;
‰‰I J
res
ÁÁ 
=
ÁÁ 
new
ÁÁ 
CategoryDTO
ÁÁ )
{
ËË 

CategoryID
ÈÈ "
=
ÈÈ# $
createdCategory
ÈÈ% 4
.
ÈÈ4 5

CategoryID
ÈÈ5 ?
,
ÈÈ? @
CategoryName
ÍÍ $
=
ÍÍ% &
createdCategory
ÍÍ' 6
.
ÍÍ6 7
CategoryName
ÍÍ7 C
,
ÍÍC D
Description
ÎÎ #
=
ÎÎ$ %
createdCategory
ÎÎ& 5
.
ÎÎ5 6
Description
ÎÎ6 A
,
ÎÎA B
Products
ÏÏ  
=
ÏÏ! "
new
ÏÏ# &
List
ÏÏ' +
<
ÏÏ+ ,

ProductDTO
ÏÏ, 6
>
ÏÏ6 7
(
ÏÏ7 8
)
ÏÏ8 9
}
ÌÌ 
;
ÌÌ 
}
ÓÓ 
else
ÔÔ 
{
 
throw
ÚÚ 
new
ÚÚ 
	Exception
ÚÚ '
(
ÚÚ' (
$str
ÚÚ( A
)
ÚÚA B
;
ÚÚB C
}
ÛÛ 
}
ÙÙ 
return
ˆˆ 
res
ˆˆ 
;
ˆˆ 
}
˜˜ 	
public
˚˚ 
List
˚˚ 
<
˚˚ 
CategoryDTO
˚˚ 
>
˚˚  
	GetAllDTO
˚˚! *
(
˚˚* +
)
˚˚+ ,
{
¸¸ 	
List
˝˝ 
<
˝˝ 
CategoryDTO
˝˝ 
>
˝˝ 
categoryDTOs
˝˝ *
=
˝˝+ ,
new
˝˝- 0
List
˝˝1 5
<
˝˝5 6
CategoryDTO
˝˝6 A
>
˝˝A B
(
˝˝B C
)
˝˝C D
;
˝˝D E
using
ˇˇ 
(
ˇˇ 
var
ˇˇ 
r
ˇˇ 
=
ˇˇ 
RepositoryFactory
ˇˇ ,
.
ˇˇ, -
CreateRepository
ˇˇ- =
(
ˇˇ= >
)
ˇˇ> ?
)
ˇˇ? @
{
ÄÄ 
var
ÇÇ 

categories
ÇÇ 
=
ÇÇ  
r
ÇÇ! "
.
ÇÇ" #
GetAll
ÇÇ# )
<
ÇÇ) *

Categories
ÇÇ* 4
>
ÇÇ4 5
(
ÇÇ5 6
)
ÇÇ6 7
;
ÇÇ7 8
categoryDTOs
ÖÖ 
=
ÖÖ 

categories
ÖÖ )
.
ÖÖ) *
Select
ÖÖ* 0
(
ÖÖ0 1
c
ÖÖ1 2
=>
ÖÖ3 5
new
ÖÖ6 9
CategoryDTO
ÖÖ: E
{
ÜÜ 

CategoryID
áá 
=
áá  
c
áá! "
.
áá" #

CategoryID
áá# -
,
áá- .
CategoryName
àà  
=
àà! "
c
àà# $
.
àà$ %
CategoryName
àà% 1
,
àà1 2
Description
ââ 
=
ââ  !
c
ââ" #
.
ââ# $
Description
ââ$ /
,
ââ/ 0
Products
ää 
=
ää 
c
ää  
.
ää  !
Products
ää! )
.
ää) *
Select
ää* 0
(
ää0 1
p
ää1 2
=>
ää3 5
new
ää6 9

ProductDTO
ää: D
{
ãã 
	ProductID
åå !
=
åå" #
p
åå$ %
.
åå% &
	ProductID
åå& /
,
åå/ 0
ProductName
çç #
=
çç$ %
p
çç& '
.
çç' (
ProductName
çç( 3
,
çç3 4
	UnitPrice
éé !
=
éé" #
p
éé$ %
.
éé% &
	UnitPrice
éé& /
,
éé/ 0
UnitsInStock
èè $
=
èè% &
p
èè' (
.
èè( )
UnitsInStock
èè) 5
,
èè5 6

CategoryID
êê "
=
êê# $
p
êê% &
.
êê& '

CategoryID
êê' 1
}
ëë 
)
ëë 
.
ëë 
ToList
ëë 
(
ëë 
)
ëë 
}
íí 
)
íí 
.
íí 
ToList
íí 
(
íí 
)
íí 
;
íí 
}
ìì 
return
ïï 
categoryDTOs
ïï 
;
ïï  
}
ññ 	
}
õõ 
}úú ì
ID:\ESCRITORIO\septimo\distribuidas\proyecto\Sales_2026\BLL\CategoryDTO.cs
	namespace 	
BLL
 
{ 
public

 

class

 
CategoryDTO

 
{ 
public 
int 

CategoryID 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CategoryName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< 

ProductDTO 
> 
Products  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
} 